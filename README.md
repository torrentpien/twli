# twli

台灣里套件

版本：0.1

簡介：

台灣約有7700多個村里，由於人口流動、行政區重新區劃，村里時常進行整併，村里整併問題造成跨年度村里分析、研究時的極大難題。台灣里套件將研究分析年度的村里整併情況進行彙整，讓使用者能根據彙整結果將各年度的村里相關數據合併後能保持一致，以利合併為各年度村里相同的面板數據（panel data）。

使用說明：

1. 處理程序



1. 安裝：
  
2. 需準備資料：
  
   -台灣村里整併表：按照台灣里套件規格編制的台灣村里整併表，台灣村里整併表紀錄研究分析所需的村里合併或分割資料。台灣村里整併表編制規格請參考。

   -所需整併的村里資料：需包含村里代碼欄位。建議使用內政部村里代碼，如桃園市桃園區文化里的村里代碼為：6800100-001。

3. 台灣村里整併表編制規格
  
  -必要欄位：村里代碼、年度、該年度整併模式
  
  如果研究分析所記錄的村里整併資料年度為2014、2018年，必要欄位如下：

| li_id | 2014 | mode_2014 | 2018 | mode_2018 |
|    :---:    |    :---:    |    :---:    |    :---:    |    :---:    | 
| 村里代碼 | 2014整併後最終村里代碼 | 2014年整併模式 | 2018整併後最終村里代碼 | 2018年整併模式 |

必要欄位說明：

li_id（村里代碼）：列出所有的村里代碼，包括因為合併後被消滅的村里。建議使用內政部村里代碼。

2014、2018（各年度整併後最終村里代碼）：將合併或分割的最終村里代碼，如果不只一個村里，以"|"分隔。

mode_2014、mode_2018（各年度整併模式）：

包括下列四種模式，請以英文小寫編碼：

m: merge，指村里合併，也就是說，li_id欄位的村里被消滅，於該年度合併進「最終村里代碼」的村里。

s: separate，指村里分割，「最終村里代碼」的村里分割為li_id欄位的村里及「最終村里代碼」的村里。

c: complex，指複雜型村里整併，複雜的定義為牽涉兩個以上的li_id欄位村里之合併及分割。

vbox: vote box，指兩個村里被編為一個選舉投開票所，如果處理選舉資料，必須將其他沒有進行村裡整併的村里人口、教育等資料進行整併。

非必要欄位：  
  
   可在各年度整併後最終村里代碼前放進其他欄位，台灣村里整併表範例（li_table.xlsx）即按照下列欄位編制：
  
| city_code | city_name | district_code | district_name | li_id | li_name | li_id_dgb | 2014 | mode_2014 | 2018 | mode_2018 |
|    :---:    |    :---:    |    :---:    |    :---:    |    :---:    |    :---:    |    :---:    |    :---:    |    :---:    |    :---:    |    :---:    |
| 縣市代碼 | 縣市名稱 | 區代碼 | 區名稱 | 村里代碼 | 村里名稱 | 主計處村里代碼 | 2014 | mode_2014 | 2018 | mode_2018 |
|    |    |    |    | ● |    |    | ● | ● | ● | ● |

●：必要欄位

注意：各年度整併後最終村里代碼、各年度整併模式(即2014、mode_2014、2018、mode_2018)必須至於台灣村里整併表最後欄位。

整併模式輸入案例：

m（合併）: 2014年7月，高雄市鳳山區海風里（6401200-023）因為人口過少，僅剩46戶，高雄市政府宣布將海風里合併進鳳山區海光里（6401200-022）。
  
| city_code | city_name | district_code | district_name | li_id | li_name | li_id_dgb | 2014 | mode_2014 | 2018 | mode_2018 |
|    :---:    |    :---:    |    :---:    |    :---:    |    :---:    |    :---:    |    :---:    |    :---:    |    :---:    |    :---:    |    :---:    |
|  64  |  高雄市  |  6401200  |  鳳山區  |  6401200-023  |  海風里  |  64000121023  |   6401200-022  |  m  |  |  |

s（分割）：

2018年3月，桃園市桃園區忠義里（6800100-005）因人口增加，忠義里拆為忠義里及新增的福元里（6800100-079）。

| city_code | city_name | district_code | district_name | li_id | li_name | li_id_dgb | 2014 | mode_2014 | 2018 | mode_2018 |
|    :---:    |    :---:    |    :---:    |    :---:    |    :---:    |    :---:    |    :---:    |    :---:    |    :---:    |    :---:    |    :---:    |
|  68  |  桃園市  |  6800100  |  桃園區  |  6800100-079  |  福元里  |  68000010079  |   |  |  6800100-005  |  s  |

c（複雜）：2014年1月，桃園市蘆竹區因人口增加，進行村里整併，其中中福里（6800500-002）、大竹里（6800500-004）、新興里（6800500-001）各取部分居民組為上興里（6800500-037），但同時，中福里（6800500-002）又將部分居民分割為中興里（6800500-036），又同時，富竹里（6800500-021）及上竹里（6800500-022）將部分居民劃歸為大竹里（6800500-004）。

| city_code | city_name | district_code | district_name | li_id | li_name | li_id_dgb | 2014 | mode_2014 | 2018 | mode_2018 |
|    :---:    |    :---:    |    :---:    |    :---:    |    :---:    |    :---:    |    :---:    |    :---:    |    :---:    |    :---:    |    :---:    |
|  68  |  桃園市  |  6800500  |  蘆竹區  |  6800500-021  |  富竹里  |  68000050021  |   6800500-004  |  c  |  |  |
|  68  |  桃園市  |  6800500  |  蘆竹區  |  6800500-021  |  上竹里  |  68000050022  |   6800500-004  |  c  |  |  |
|  68  |  桃園市  |  6800500  |  蘆竹區  |  6800500-036  |  中興里  |  68000050036  |   6800500-002  |  c  |  |  |
|  68  |  桃園市  |  6800500  |  蘆竹區  |  6800500-037  |  上興里  |  68000050037  |   6800500-001\|6800500-002\|6800500-004  |  c  |  |  |

vbox（一投開票所多村里）：2014年縣市長選舉，台中市西屯區協和里（6600600-020）、福恩里（6600600-035）部分居民合併至獨立投開票所（6600600-9999）投票。

vbox（一投開票所多村里）：2014年縣市長選舉，台中市西屯區協和里（6600600-020）、福恩里（6600600-035）部分居民合併至獨立投開票所（6600600-9999）投票。

| city_code | city_name | district_code | district_name | li_id | li_name | li_id_dgb | 2014 | mode_2014 | 2018 | mode_2018 |
|    :---:    |    :---:    |    :---:    |    :---:    |    :---:    |    :---:    |    :---:    |    :---:    |    :---:    |    :---:    |    :---:    |
|  66  |  台中市  |  6600600  |  西屯區  |  6600600-035  |  福恩里  |  66000060035  |   6600600-020\|6600600-9999  |  vbox  |  |  |

